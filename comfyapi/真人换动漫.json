{
  "1": {
    "inputs": {
      "text": "text, watermark, clothing changes, overexposed, bright tone, static, blurry details, subtitle, painting, still image, grayish, worst quality, low quality, JPEG artifacts, ugly, deformed, extra fingers, bad hands, bad face, malformed mouth, disfigured, malformed limbs, fused fingers, messy background, three legs, crowded background, walking backwards, realistic skin texture, human skin pores, photorealistic details, different character, inconsistent body proportions, head-body separation",
      "clip": [
        "2",
        0
      ]
    },
    "class_type": "CLIPTextEncode",
    "_meta": {
      "title": "CLIP Text Encode (Negative Prompt)"
    }
  },
  "2": {
    "inputs": {
      "clip_name": "umt5_xxl_fp8_e4m3fn_scaled.safetensors",
      "type": "wan",
      "device": "default"
    },
    "class_type": "CLIPLoader",
    "_meta": {
      "title": "加载CLIP"
    }
  },
  "3": {
    "inputs": {
      "vae_name": "wan_2.1_vae.safetensors"
    },
    "class_type": "VAELoader",
    "_meta": {
      "title": "加载VAE"
    }
  },
  "4": {
    "inputs": {
      "clip_name": "clip_vision_h.safetensors"
    },
    "class_type": "CLIPVisionLoader",
    "_meta": {
      "title": "加载CLIP视觉"
    }
  },
  "9": {
    "inputs": {
      "crop": "none",
      "clip_vision": [
        "4",
        0
      ],
      "image": [
        "10",
        0
      ]
    },
    "class_type": "CLIPVisionEncode",
    "_meta": {
      "title": "CLIP视觉编码"
    }
  },
  "10": {
    "inputs": {
      "image": "character.png"
    },
    "class_type": "LoadImage",
    "_meta": {
      "title": "加载图像"
    }
  },
  "18": {
    "inputs": {
      "lora_name": "lightx2v_I2V_14B_480p_cfg_step_distill_rank64_bf16.safetensors",
      "strength_model": 0.85,
      "model": [
        "20",
        0
      ]
    },
    "class_type": "LoraLoaderModelOnly",
    "_meta": {
      "title": "LoRA加载器（仅模型）"
    }
  },
  "19": {
    "inputs": {
      "filename_prefix": "video/ComfyUI",
      "format": "auto",
      "codec": "auto",
      "video": [
        "232:15",
        0
      ]
    },
    "class_type": "SaveVideo",
    "_meta": {
      "title": "保存视频"
    }
  },
  "20": {
    "inputs": {
      "unet_name": "Wan2_2-Animate-14B_fp8_e4m3fn_scaled_KJ.safetensors",
      "weight_dtype": "default"
    },
    "class_type": "UNETLoader",
    "_meta": {
      "title": "UNet加载器"
    }
  },
  "21": {
    "inputs": {
      "text": "(Full-body portrait:1.4), (chibi:1.5), super deformed, 2 heads tall, big head small body, flat chest, child body, cute, (pure anime style:1.5), short legs, toddler proportions, consistent character features, (same full body as reference image:1.8), (100% same character as reference:1.8), sharp anime contour, clean cel shading, no realistic details, smooth anime skin, perfect mouth movement, seamless frame transition, matching clothing style with reference",
      "clip": [
        "2",
        0
      ]
    },
    "class_type": "CLIPTextEncode",
    "_meta": {
      "title": "CLIP Text Encode (Positive Prompt)"
    }
  },
  "23": {
    "inputs": {
      "video": [
        "145",
        0
      ]
    },
    "class_type": "GetVideoComponents",
    "_meta": {
      "title": "获取视频组件"
    }
  },
  "60": {
    "inputs": {
      "shift": 8,
      "model": [
        "99",
        0
      ]
    },
    "class_type": "ModelSamplingSD3",
    "_meta": {
      "title": "采样算法（SD3）"
    }
  },
  "99": {
    "inputs": {
      "lora_name": "WanAnimate_relight_lora_fp16.safetensors",
      "strength_model": 0.8,
      "model": [
        "18",
        0
      ]
    },
    "class_type": "LoraLoaderModelOnly",
    "_meta": {
      "title": "LoRA加载器（仅模型）"
    }
  },
  "100": {
    "inputs": {
      "detect_hand": "disable",
      "detect_body": "disable",
      "detect_face": "enable",
      "resolution": [
        "158",
        0
      ],
      "bbox_detector": "yolox_l.onnx",
      "pose_estimator": "dw-ll_ucoco_384_bs5.torchscript.pt",
      "scale_stick_for_xinsr_cn": "disable",
      "image": [
        "212",
        0
      ]
    },
    "class_type": "DWPreprocessor",
    "_meta": {
      "title": "DWPose Estimator"
    }
  },
  "101": {
    "inputs": {
      "detect_hand": "enable",
      "detect_body": "enable",
      "detect_face": "enable",
      "resolution": [
        "158",
        0
      ],
      "bbox_detector": "yolox_l.onnx",
      "pose_estimator": "dw-ll_ucoco_384_bs5.torchscript.pt",
      "scale_stick_for_xinsr_cn": "disable",
      "image": [
        "212",
        0
      ]
    },
    "class_type": "DWPreprocessor",
    "_meta": {
      "title": "DWPose Estimator"
    }
  },
  "107": {
    "inputs": {
      "keep_model_loaded": true,
      "individual_objects": false,
      "sam2_model": [
        "108",
        0
      ],
      "image": [
        "212",
        0
      ],
      "coordinates_positive": [
        "229",
        0
      ]
    },
    "class_type": "Sam2Segmentation",
    "_meta": {
      "title": "Sam2Segmentation"
    }
  },
  "108": {
    "inputs": {
      "model": "sam2_hiera_base_plus.safetensors",
      "segmentor": "video",
      "device": "cuda",
      "precision": "fp16"
    },
    "class_type": "DownloadAndLoadSAM2Model",
    "_meta": {
      "title": "(Down)Load SAM2Model"
    }
  },
  "145": {
    "inputs": {
      "file": "reference.mp4",
      "video-preview": ""
    },
    "class_type": "LoadVideo",
    "_meta": {
      "title": "加载视频"
    }
  },
  "158": {
    "inputs": {
      "image_gen_width": [
        "159",
        0
      ],
      "image_gen_height": [
        "160",
        0
      ],
      "resize_mode": "Just Resize",
      "original_image": [
        "23",
        0
      ]
    },
    "class_type": "PixelPerfectResolution",
    "_meta": {
      "title": "Pixel Perfect Resolution"
    }
  },
  "159": {
    "inputs": {
      "value": 640
    },
    "class_type": "PrimitiveInt",
    "_meta": {
      "title": "Width"
    }
  },
  "160": {
    "inputs": {
      "value": 640
    },
    "class_type": "PrimitiveInt",
    "_meta": {
      "title": "Height"
    }
  },
  "212": {
    "inputs": {
      "upscale_method": "lanczos",
      "width": [
        "159",
        0
      ],
      "height": [
        "160",
        0
      ],
      "crop": "center",
      "image": [
        "23",
        0
      ]
    },
    "class_type": "ImageScale",
    "_meta": {
      "title": "缩放图像"
    }
  },
  "229": {
    "inputs": {
      "points_store": "{\"positive\":[{\"x\":200,\"y\":150},{\"x\":300,\"y\":150},{\"x\":250,\"y\":300},{\"x\":200,\"y\":500},{\"x\":300,\"y\":500}],\"negative\":[{\"x\":0,\"y\":0}]}",
      "coordinates": "[{\"x\":200,\"y\":150},{\"x\":300,\"y\":150},{\"x\":250,\"y\":300},{\"x\":200,\"y\":500},{\"x\":300,\"y\":500}]",
      "neg_coordinates": "[{\"x\":0,\"y\":0}]",
      "bbox_store": "[{}]",
      "bboxes": "[{}]",
      "bbox_format": "xyxy",
      "width": 640,
      "height": 640,
      "normalize": false,
      "New canvas": null,
      "bg_image": [
        "212",
        0
      ]
    },
    "class_type": "PointsEditor",
    "_meta": {
      "title": "Points Editor"
    }
  },
  "274": {
    "inputs": {
      "expand": 50,
      "tapered_corners": true,
      "mask": [
        "107",
        0
      ]
    },
    "class_type": "GrowMask",
    "_meta": {
      "title": "扩展遮罩"
    }
  },
  "275": {
    "inputs": {
      "color": "0, 0, 0",
      "device": "cpu",
      "image": [
        "212",
        0
      ],
      "mask": [
        "276",
        0
      ]
    },
    "class_type": "DrawMaskOnImage",
    "_meta": {
      "title": "Draw Mask On Image"
    }
  },
  "276": {
    "inputs": {
      "block_size": 32,
      "device": "cpu",
      "masks": [
        "274",
        0
      ]
    },
    "class_type": "BlockifyMask",
    "_meta": {
      "title": "Blockify Mask"
    }
  },
  "232:57": {
    "inputs": {
      "trim_amount": [
        "232:62",
        3
      ],
      "samples": [
        "232:63",
        0
      ]
    },
    "class_type": "TrimVideoLatent",
    "_meta": {
      "title": "TrimVideoLatent"
    }
  },
  "232:58": {
    "inputs": {
      "samples": [
        "232:57",
        0
      ],
      "vae": [
        "3",
        0
      ]
    },
    "class_type": "VAEDecode",
    "_meta": {
      "title": "VAE解码"
    }
  },
  "232:62": {
    "inputs": {
      "width": 640,
      "height": 640,
      "length": 90,
      "batch_size": 1,
      "continue_motion_max_frames": 5,
      "video_frame_offset": 0,
      "positive": [
        "21",
        0
      ],
      "negative": [
        "1",
        0
      ],
      "vae": [
        "3",
        0
      ],
      "clip_vision_output": [
        "9",
        0
      ],
      "reference_image": [
        "10",
        0
      ],
      "face_video": [
        "100",
        0
      ],
      "pose_video": [
        "101",
        0
      ],
      "background_video": [
        "275",
        0
      ],
      "character_mask": [
        "276",
        0
      ],
      "ref_image_strength": 0.95,
      "face_align_strength": 0.98,
      "body_consistency_strength": 0.95
    },
    "class_type": "WanAnimateToVideo",
    "_meta": {
      "title": "万动画转视频"
    }
  },
  "232:230": {
    "inputs": {
      "batch_index": [
        "232:62",
        4
      ],
      "length": 4096,
      "image": [
        "232:58",
        0
      ]
    },
    "class_type": "ImageFromBatch",
    "_meta": {
      "title": "从批次获取图像"
    }
  },
  "232:15": {
    "inputs": {
      "fps": 20,
      "images": [
        "232:230",
        0
      ],
      "audio": [
        "23",
        1
      ]
    },
    "class_type": "CreateVideo",
    "_meta": {
      "title": "创建视频"
    }
  },
  "232:63": {
    "inputs": {
      "seed": -1,
      "steps": 20,
      "cfg": 7.5,
      "sampler_name": "euler",
      "scheduler": "simple",
      "denoise": 0.8,
      "model": [
        "60",
        0
      ],
      "positive": [
        "232:62",
        0
      ],
      "negative": [
        "232:62",
        1
      ],
      "latent_image": [
        "232:62",
        2
      ]
    },
    "class_type": "KSampler",
    "_meta": {
      "title": "K采样器"
    }
  }
}